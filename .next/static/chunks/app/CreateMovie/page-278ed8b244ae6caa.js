(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{8604:function(e,t,n){Promise.resolve().then(n.t.bind(n,3170,23)),Promise.resolve().then(n.bind(n,8803)),Promise.resolve().then(n.bind(n,321))},2996:function(e,t,n){"use strict";var i=n(7437);n(2265);var a=n(1865),l=n(2927),r=n.n(l);t.Z=e=>{let{placeholder:t,control:n,setValue:l,reset:s,name:o,defaultValue:u}=e;return(0,i.jsx)("div",{children:(0,i.jsx)(a.Qr,{control:n,name:o,render:e=>{let{field:n}=e;return(0,i.jsx)("input",{className:"publishingDate"===o?"".concat(r().input," ").concat(r().inputDate):"title"===o?"".concat(r().input," ").concat(r().inputTitle):r().input,...n,onChange:e=>{l&&l(o,e.target.value),n.onChange(e)},placeholder:t,name:o})}})})}},8803:function(e,t,n){"use strict";n.r(t);var i=n(7437),a=n(2265),l=n(4033);t.default=e=>{let{children:t}=e,n=(0,l.useRouter)();return(0,a.useEffect)(()=>{localStorage.getItem("token")||n.replace("/")},[]),(0,i.jsx)(i.Fragment,{children:t})}},321:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var i=n(7437),a=n(2265),l=n(3136),r=n.n(l),s=n(1865),o=n(4578),u=n(8110),c=n(2996),m=n(2173),d=n(4033);let p=o.z.object({title:o.z.string().min(1,{message:"Title is required"}).min(3,{message:"Title of minimum 3 letters required"}),publishing_year:o.z.string().min(1,{message:"Publishing Date is required"}).min(4,{message:"Publishing Date must at least 4 characters"}),image:o.z.any()});function _(){var e,t,n;let{control:l,handleSubmit:o,setValue:_,register:v,formState:{errors:h}}=(0,s.cI)({resolver:(0,u.F)(p)}),g=(0,a.useRef)(null),b=(0,a.useRef)(null),[f,x]=(0,a.useState)(null),C=(0,d.useRouter)();console.log(h);let j=()=>{console.log("Cancel button clicked")},M=async e=>{let t=new FormData;t.append("title",e.title),t.append("publishing_year",e.publishing_year),t.append("image",f);try{let e=localStorage.getItem("token");m.Z.defaults.headers.post.Authorization=e,m.Z.defaults.headers.common["Content-Type"]="multipart/form-data";let n=await m.Z.post("http://3.144.22.101/api/movies",t),i=await n.data;console.log("dd",i),C.push("/MovieList")}catch(e){console.error("Error in sending movies:",e)}finally{}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("form",{onSubmit:o(M),children:[(0,i.jsxs)("div",{className:r().flexContainer,children:[(0,i.jsxs)("div",{className:"".concat(r().uploadDiv," mt-10 mx-5"),children:[(0,i.jsx)("p",{className:"".concat(r().uploadText),onClick:()=>{var e;null===(e=g.current)||void 0===e||e.click()},children:"Click to Upload Image"}),(0,i.jsx)("input",{type:"file",className:r().fileUpload,...v("image"),ref:g,onChange:e=>{var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(console.log("Selected file:",n),x(n),n){let e=new FileReader;e.onload=e=>{var t,n;let i=null===(t=e.target)||void 0===t?void 0:t.result;null===(n=b.current)||void 0===n||n.setAttribute("src",i)},e.readAsDataURL(n)}},onClick:e=>{e.stopPropagation()}}),!f&&(0,i.jsx)("span",{className:r().errorMsg,children:null===(e=h.image)||void 0===e?void 0:e.message}),f&&(0,i.jsx)("img",{ref:b,className:r().thumbnail,alt:"Thumbnail"})]}),(0,i.jsxs)("div",{className:"".concat(r().sideForm),children:[(0,i.jsx)(c.Z,{placeholder:"Title",control:l,setValue:_,name:"title"}),(0,i.jsx)("span",{className:r().errorMsg,children:null===(t=h.title)||void 0===t?void 0:t.message}),(0,i.jsx)(c.Z,{placeholder:"Publishing year",control:l,setValue:_,name:"publishing_year"}),(0,i.jsx)("span",{className:r().errorMsg,children:null===(n=h.publishing_year)||void 0===n?void 0:n.message}),(0,i.jsxs)("div",{className:"".concat(r().buttons," flex gap-x-2 mt-8"),children:[(0,i.jsx)("button",{className:r().cancelBtn,type:"button",onClick:()=>j(),children:"Cancel"}),(0,i.jsx)("button",{className:r().submitBtn,type:"submit",children:"Submit"})]})]})]}),(0,i.jsxs)("div",{className:"".concat(r().buttonsMobile," flex gap-x-2 mt-8"),children:[(0,i.jsx)("button",{className:r().cancelBtn,type:"button",onClick:()=>j(),children:"Cancel"}),(0,i.jsx)("button",{className:r().submitBtn,type:"submit",children:"Submit"})]})]})})}},3170:function(e){e.exports={CreateMovie:"CreateMovie_CreateMovie__sZiDc"}},2927:function(e){e.exports={input:"Input_input__7ueAE",inputDate:"Input_inputDate__FtPKH",inputTitle:"Input_inputTitle__NUTIe",inputError:"Input_inputError__Gy9Rj"}},3136:function(e){e.exports={uploadDiv:"CreateMovieForm_uploadDiv___0_HP",errorMsg:"CreateMovieForm_errorMsg__hU7jy",fileUpload:"CreateMovieForm_fileUpload__vq7Pv",cancelBtn:"CreateMovieForm_cancelBtn__PFQ9j",submitBtn:"CreateMovieForm_submitBtn__vhPc7",flexContainer:"CreateMovieForm_flexContainer__rSMZb",sideForm:"CreateMovieForm_sideForm__9cQuU",thumbnail:"CreateMovieForm_thumbnail__ydtrF",buttonsMobile:"CreateMovieForm_buttonsMobile__oF_r_",buttons:"CreateMovieForm_buttons__NJa2D"}}},function(e){e.O(0,[630,329,971,938,744],function(){return e(e.s=8604)}),_N_E=e.O()}]);