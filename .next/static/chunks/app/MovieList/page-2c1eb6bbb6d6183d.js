(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{3573:function(e,t,i){Promise.resolve().then(i.bind(i,8488))},8488:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return f}});var a=i(7437),s=i(2265),l=i(2173),n=i(6691),o=i.n(n),c=i(1396),r=i.n(c),m=i(8803),d=i(956),u=i.n(d),h=e=>{let{movies:t,currentPage:i,itemsPerPage:s,totalMovies:l,onPageChange:n}=e,c=(i-1)*s,m=t.slice(c,Math.min(c+s,l));m.length<=0&&(m=t);let d=Math.ceil(l/s);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"".concat(u().flexContainer," flex flex-wrap md:gap-6 lg:gap-8 sm:gap-1"),children:m.map(e=>(0,a.jsx)("div",{className:"".concat(u().moviecard," mx-auto sm:flex-basis-1/2 md:flex-basis-1/3 lg:flex-basis-1/4"),children:(0,a.jsxs)(r(),{href:"/EditMovie/".concat(e._id),children:[(0,a.jsx)("div",{style:{width:"266px",height:"400px"},children:(0,a.jsx)(o(),{alt:e.title,title:e.title,width:266,height:400,src:"".concat(null==e?void 0:e.image_url),className:"w-full h-full object-cover"})}),(0,a.jsx)("p",{className:u().movieTitle,children:e.title}),(0,a.jsx)("p",{className:u().publishingYear,children:e.publishing_year})]})},e._id))}),(0,a.jsxs)("div",{className:"mx-auto mt-6 flex gap-x-3 justify-center text-center",children:[(0,a.jsx)("button",{className:u().navbtn,onClick:()=>{i>1&&n(i-1)},disabled:1===i,children:"Prev"}),Array.from({length:d},(e,t)=>(0,a.jsx)("button",{onClick:()=>n(t+1),disabled:i===t+1,children:t+1},t+1)),(0,a.jsx)("button",{onClick:()=>{i<=d&&n(i+1)},disabled:i===d,children:"Next"})]})]})},g=i(4033),v=i(9123),x=i.n(v);function f(){let[e,t]=(0,s.useState)({data:[],page:1,limit:8,totalPage:1,totalCount:0}),[i,n]=(0,s.useState)(!0),c=(0,g.useRouter)();(0,s.useEffect)(()=>{d()},[e.page]);let d=async()=>{n(!0);try{let i=localStorage.getItem("token");l.Z.defaults.headers.get.Authorization=i,l.Z.defaults.headers.common["Content-Type"]="application/json";let a=await l.Z.get("http://3.17.6.121/api/movies",{params:{page:e.page,limit:e.limit},headers:{Authorization:i,"Content-Type":"application/json"}}),s=await a.data;console.log("mmm",s),t(s)}catch(e){console.error("Error fetching movies:",e)}finally{n(!1)}};return i?(0,a.jsx)("p",{className:"h-full",children:"Loading..."}):(0,a.jsx)(m.default,{children:(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between mx-10 my-10 ",children:[(0,a.jsxs)("h2",{className:"".concat(x().mymovie," flex align-bottom gap-2 items-center"),children:["My movies",(0,a.jsx)(r(),{href:"/CreateMovie",children:(0,a.jsx)(o(),{src:"/icons/AddMovie.svg",height:32,width:32,alt:"add movie",title:"add movie",className:"mx-auto"})})]}),(0,a.jsxs)("p",{className:"flex gap-2 items-center",onClick:()=>{localStorage.removeItem("token"),c.push("/")},children:["Logout",(0,a.jsx)(o(),{src:"/icons/logout.svg",height:24,width:24,alt:"add movie",title:"add movie",className:"mx-auto"})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(h,{movies:e.data,currentPage:e.page,itemsPerPage:e.limit,totalMovies:e.totalCount,onPageChange:e=>{t(t=>({...t,page:e}))}})})]})})}},8803:function(e,t,i){"use strict";i.r(t);var a=i(7437),s=i(2265),l=i(4033);t.default=e=>{let{children:t}=e,i=(0,l.useRouter)();return(0,s.useEffect)(()=>{localStorage.getItem("token")||i.replace("/")},[]),(0,a.jsx)(a.Fragment,{children:t})}},9123:function(e){e.exports={movieList:"MovieListPage_movieList__y8MQc",submitBtn:"MovieListPage_submitBtn__2W_cs",mymovie:"MovieListPage_mymovie__PTci3"}},956:function(e){e.exports={moviecard:"ListOfMovies_moviecard__batiC",navbtn:"ListOfMovies_navbtn__AbLhg",flexContainer:"ListOfMovies_flexContainer__a4b3S",movieTitle:"ListOfMovies_movieTitle__VHemB",publishingYear:"ListOfMovies_publishingYear__UAgLX"}}},function(e){e.O(0,[630,360,971,938,744],function(){return e(e.s=3573)}),_N_E=e.O()}]);